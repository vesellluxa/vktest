# Тестовое задания для VK Tech
## ТЗ:
Необходимо спроектировать и разработать Django-сервис друзей.

Сервис должен предоставлять возможности:
- зарегистрировать нового пользователя
- отправить одному пользователю заявку в друзья другому
- принять/отклонить пользователю заявку в друзья от другого пользователя
- посмотреть пользователю список своих исходящих и входящих заявок в друзья
- посмотреть пользователю список своих друзей
- получить пользователю статус дружбы с каким-то другим пользователем (нет ничего /
есть исходящая заявка / есть входящая заявка / уже друзья)
- удалить пользователю другого пользователя из своих друзей
- если пользователь1 отправляет заявку в друзья пользователю2, а пользователь2
отправляет заявку пользователю1, то они автоматом становятся друзьями, их заявки
автоматом принимаются

Модель пользователя может быть самой простой:
-id
-username

Необходимо:
- описать REST интерфейс сервиса с помощью OpenAPI
- написать на Django сервис по этой спецификации
- описать краткую документацию с примерами запуска сервиса и вызова его API
+ unit-тесты будут плюсом
+ Dockerfile для упаковки в контейнер будет плюсом
## Спецификация API
### Регистрация
На эндпоинт `/api/v1/signup/` необходимо отправить 2 поля:
```javascript
{ 
  "username": "username",
  "password": "password"
}
```
Ответ:
```
Вы успешно зарегестрировались под именем: username
```
### Авторизация
На эндпоинт `/api/v1/obtain_token/` с помощью `POST` запроса необходимо отправить 2 поля:
```javascript
{ 
  "username": "username",
  "password": "password"
}
```
Ответ:
```
{ "auth_token": Ваш токен для входа }
```
Чтобы авторизоваться на сайте, необходимо отправить этот токен в заголовке запроса:
```
Authorization Token Ваш токен
```
### Пользователи
Чтобы посмотреть список пользователей, необходимо отправить `GET` запрос на эндпоинт `/api/v1/users/`.
Пример ответа:
```
[
    {
        "username": "admin",
        "friends_count": 0,
        "subscribers": 0,
        "id": 1,
        "friends": []
    },
    {
        "username": "zahar",
        "friends_count": 0,
        "subscribers": 0,
        "id": 10,
        "friends": []
    }
]
```
Чтобы перейти к пользователю, необходимо обратиться к эндпоинту `/api/v1/users/ {ID} /` методом `GET`.
Пример ответа:
```
{
    "username": "admin",
    "friends_count": 0,
    "subscribers": 0,
    "id": 1,
    "friends": []
}
```
Чтобы отправить заявку в друзья, необходимо обратиться к эндпоинту `/api/v1/users/ {ID} /send_friend_request/` методом `POST`.
Пример ответа:
```
Вы отправили заявку в друзья пользователю {username} !
```
Чтобы посмотреть список друзей, необходимо обратиться к эндпоинту `/api/v1/friends/` методом `GET`.
Пример ответа:
```
[
    {
        "username": "zahar",
        "status": "У вас в друзьях",
        "friends_count": 1,
        "subscribers": 1,
        "id": 10,
        "friends": [
            {
                "id": 1,
                "username": "admin"
            }
        ]
    }
]
```
Чтобы удалить друга, необходимо обратиться к эндпоинту `/api/v1/friends/ {ID} /delete_friend/` методом `DELETE`.
Пример ответа:
```
"Вы удалили из друзей пользователя zahar"
```
### Заявки в друзья
Чтобы посмотреть исходящие заявки, необходимо обратиться к эндпоинту `/api/v1/friend_requests/outgoing/` методом `GET`.
Примет ответа:
```
[
    {
        "to": {
            "id": 1,
            "username": "admin"
        },
        "id": 41
    }
]
```
Чтобы отменить заявку, необходимо обратиться к эндпоинту `/api/v1/friend_requests/outgoing/ {ID} /cancel/` методом `DELETE`.
Пример ответа:
```
"Вы отписались от пользователя admin!"
```
Чтобы посмотреть входящие заявки, необходимо обратиться к эндпоинту `/api/v1/friend_requests/incoming/` методом `GET`.
Пример ответа:
```
[
    {
        "to": {
            "id": 10,
            "username": "zahar"
        },
        "id": 43
    }
]
```
Чтобы отменить заявку, необходимо обратиться к эндпоинту `/api/v1/friend_requests/incoming/ {ID} /decline/` методом `POST`.
Пример ответа:
```
"Пользователь оставлен в подписчиках!"
```
Чтобы принять заявку, необходимо обратиться к эндпоинту `/api/v1/friend_requests/incoming/ {ID} /accept/` методом `POST`.
Пример ответа:
```
"Пользователь добавлен в друзья!"
```
### OpenApi
Swagger-страница доступна по адресу `/swagger-ui/`

